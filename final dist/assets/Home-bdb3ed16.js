import{a as c,b as p}from"./axios-a01a6b08.js";import{_,k as i,l as g,q as n,s as $,h as a,t as o,y as v,D as m,E as w,G as C,x as h,v as l,F as y,H as V,z as A,A as u,B as T,C as b}from"./index-f37c92ad.js";import{V as B}from"./VDialog-d83bc993.js";import{V as D}from"./VCard-48656466.js";const I="/assets/parents-2e816a30.png",S="/assets/children-2e125206.png";const x={emits:["rerender-drawer","reset-app"],data:()=>({parentsData:null,show:1,dialog:!1,children:[]}),created(){this.getData(),this.$cookies.get("showModal")&&(this.dialog=!0)},methods:{backFunc(){this.show==3&&(this.show=1)},goTo(s){s==1?(this.show=1,this.dialog=!1,this.getData(1)):s==2?console.log("2"):s==3&&(console.log(this.children),this.children.length>0?this.show=3:this.$swal("هنوز اطلاعات کودک را وارد نکرده‌اید!","","warning").then(e=>{e.isConfirmed&&(this.$emit("rerender-drawer",1),this.$cookies.remove("addChildActive"),this.$cookies.remove("parentsDetailsActive"),this.$cookies.remove("coursesShopActive"),this.$router.push({path:"/add-child"}))}))},getData(s){s==1?c({method:"GET",url:`http://194.9.56.86/api/v1/dashboard/?session=${this.$cookies.get("sessionId")}`,header:"application/json",headers:{Authorization:`Bearer ${this.$cookies.get("userToken")}`,"Content-Type":"application/json"}}).then(e=>{console.log(e),this.$emit("rerender-drawer",3),this.$cookies.remove("addChildActive"),this.$cookies.remove("parentsDetailsActive"),this.$cookies.remove("coursesShopActive"),this.$router.push({name:"courseShop"})}).catch(e=>{this.$swal("مشکلی پیش آمد!",e.message,"error")}):c({method:"GET",url:`http://194.9.56.86/api/v1/dashboard/?session=${this.$cookies.get("sessionId")}`,header:"application/json",headers:{Authorization:`Bearer ${this.$cookies.get("userToken")}`,"Content-Type":"application/json"}}).then(e=>{this.children=e.data.children;for(let r=0;r<this.children.length;r++)this.children[r].type==1?this.children[r].type="۴-۷ سال":this.children[r].type==2?this.children[r].type="۸-۱۱ سال":this.children[r].type="۱۲-۱۵ سال";console.log(this.children)}).catch(e=>{this.$swal("مشکلی پیش آمد!",e.message,"error")})},chooseCourse(s){this.$cookies.set("childNationalCode",s),c({method:"GET",headers:{Authorization:`Bearer ${this.$cookies.get("userToken")}`,"Content-Type":"application/json"},url:`http://194.9.56.86/api/v1/dashboard/change-child-user/${s}/?session=${this.$cookies.get("sessionId")}`}).then(e=>{console.log(e),this.$emit("rerender-drawer",3),this.$cookies.remove("addChildActive"),this.$cookies.remove("parentsDetailsActive"),this.$cookies.remove("coursesShopActive"),this.$router.push({name:"courseShop"})}).catch(e=>{console.log(e),this.$swal(e.response.data.message,"","error")})}}},k=s=>(T("data-v-33ec2523"),s=s(),b(),s),z={class:"mainPart"},j={class:"logoPart"},E={class:"backIcon"},N={key:0,class:"fontClass mb-5"},P={key:1,class:"fontClass mb-5"},F={key:2,class:"fontClass mb-5"},G={key:3,class:"flex_class"},H=k(()=>o("h2",{class:"fontClass"},"والدین",-1)),L=k(()=>o("h2",{class:"fontClass"},"کودک",-1)),q={key:4,class:"chooseChildContainer"},M=["onClick"];function R(s,e,r,U,J,d){return i(),g($,{class:"appClass"},{default:n(()=>[a(A,{rtl:""},{default:n(()=>[o("div",z,[o("div",j,[a(p,{color:"#525355",class:"text-none changeRoleBtn",size:"large","min-width":"200",variant:"outlined",onClick:e[0]||(e[0]=t=>this.dialog=!0)},{default:n(()=>[v(" تغییر نقش ")]),_:1}),a(m,{src:w,alt:"mainLogo",style:{width:"250px",height:"250px",padding:"10px !important"}})]),a(B,{modelValue:s.dialog,"onUpdate:modelValue":e[5]||(e[5]=t=>s.dialog=t),persistent:"",width:"auto",style:{"z-index":"1 !important"}},{default:n(()=>[a(D,{class:"mainCard text-center mx-auto ma-4 pa-4",style:{right:"20%"},"min-width":"1020"},{default:n(()=>[o("div",{class:"closeCross",onClick:e[1]||(e[1]=t=>this.dialog=!1)},[a(p,{class:"ma-2",color:"#f68100",icon:"mdi-close"})]),o("div",E,[s.show==2||s.show==3?(i(),g(p,{key:0,class:"ma-2",color:"orange-darken-2",onClick:e[2]||(e[2]=t=>d.backFunc(s.show))},{default:n(()=>[v(" بازگشت "),a(C,{end:"",icon:"mdi-arrow-left"})]),_:1})):h("",!0)]),s.show==1?(i(),l("h3",N,"لطفا انتخاب کنید تحت عنوان چه نقشی مایل به ادامه مراحل هستید:")):h("",!0),s.show==2?(i(),l("h3",P,"لطفا مشخص کنید به عنوان کدام یک از والدین مایل به ادامه مراحل هستید:")):h("",!0),s.show==3?(i(),l("h3",F,"لطفا نام کودک را انتخاب نمایید:")):h("",!0),s.show==1?(i(),l("div",G,[o("div",{class:"parentsPart flex_column_class mt-7",onClick:e[3]||(e[3]=t=>d.goTo(1))},[a(m,{width:"300","aspect-ratio":1,src:I,cover:""}),H]),o("div",{class:"childPart flex_column_class mt-7",onClick:e[4]||(e[4]=t=>d.goTo(3))},[a(m,{width:"300","aspect-ratio":1,src:S}),L])])):h("",!0),s.show==3?(i(),l("div",q,[(i(!0),l(y,null,V(s.children,(t,f)=>(i(),l("div",{class:"choseChild mt-2",key:f,onClick:K=>d.chooseCourse(t.national_code)},[o("h2",null,u(t.first_name),1),o("h2",null,u(t.last_name),1),o("h2",null,u(t.type),1)],8,M))),128))])):h("",!0)]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1})}const Z=_(x,[["render",R],["__scopeId","data-v-33ec2523"]]);export{Z as default};
