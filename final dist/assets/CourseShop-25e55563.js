import{a as h,b as m}from"./axios-a01a6b08.js";import{_ as B,k as r,l as p,q as a,s as I,h as t,t as o,v as d,H as f,F as C,z as S,D as v,E as g,y as c,A as l,cU as y,B as D,C as z}from"./index-f37c92ad.js";import{V as $,a as k,b as x,c as b,d as T}from"./VCard-48656466.js";const A={data:()=>({showCourses:!0,courses:[],purchasedCourses:[]}),created(){this.getData()},methods:{getData(){h({method:"GET",url:`http://194.9.56.86/api/v1/courses/list/?session=${this.$cookies.get("sessionId")}`,headers:{Authorization:`Bearer ${this.$cookies.get("userToken")}`,"Content-Type":"application/json"}}).then(e=>{console.log(e);for(let s=0;s<e.data.length;s++)this.courses.push({id:e.data[s].id,name:e.data[s].name,description:e.data[s].description,price:e.data[s].price})}).catch(e=>{this.$swal("مشکلی پیش آمد!",e.message,"error")}),h({method:"GET",url:`http://194.9.56.86/api/v1/dashboard/my-courses/?session=${this.$cookies.get("sessionId")}`,headers:{Authorization:`Bearer ${this.$cookies.get("userToken")}`,"Content-Type":"application/json"}}).then(e=>{console.log(e);for(let s=0;s<e.data.length;s++)this.purchasedCourses.push({id:e.data[s].id,name:e.data[s].course.name,description:e.data[s].course.description,price:e.data[s].course.price,startDate:e.data[s].created_at,expireDate:e.data[s].expire_at});this.purchasedCourses.length>0?this.showCourses=!0:this.showCourses=!1}).catch(e=>{this.$swal("مشکلی پیش آمد!",e.message,"error")})},buyCourse(e){console.log(e),e=parseInt(e);var s=new FormData;JSON.stringify(s.append("course",e)),JSON.stringify(s.append("session_id",this.$cookies.get("sessionId"))),h({method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.$cookies.get("userToken")}`},url:`http://194.9.56.86/api/v1/courses/create/?session=${this.$cookies.get("sessionId")}`,data:s}).then(n=>{n.status==201&&this.$router.push({name:"PlayerComp"})}).catch(n=>{console.log(n),this.$swal(n.response.data.message,"","error")})},goToCourse(){this.$router.push({name:"PlayerComp"})}}},V=e=>(D("data-v-821f1bc7"),e=e(),z(),e),P={class:"mainContainer flex_column_class"},N={class:"coursesContainer flex_column_class marginClass"},E=V(()=>o("div",{class:"titlePart"},[o("div",{class:"titleShape"}),o("h2",null,"دوره‌های قابل خریداری")],-1)),F={class:"cardClass1 flex_class"},L={class:"coursesContainer flex_column_class mt-4 mb-4"},j=V(()=>o("div",{class:"titlePart"},[o("div",{class:"titleShape"}),o("h2",null,"دوره‌های خریداری شده")],-1)),O={key:0,class:"cardClass flex_class"},G={key:1};function J(e,s,n,q,H,_){return r(),p(I,null,{default:a(()=>[t(S,{rtl:""},{default:a(()=>[o("div",P,[o("div",N,[E,o("div",F,[(r(!0),d(C,null,f(e.courses,(i,u)=>(r(),p($,{class:"mx-auto my-12",style:{border:"1px solid #6d6e71"},"min-width":"374",elevation:"24",key:u},{default:a(()=>[t(v,{cover:"",height:"320",src:g}),t(k,null,{default:a(()=>[t(x,null,{default:a(()=>[c(l(i.name),1)]),_:2},1024)]),_:2},1024),t(b,null,{default:a(()=>[o("div",null,l(i.description),1),o("div",null,"ریال "+l(i.price)+"قیمت: ",1)]),_:2},1024),t(y,{class:"mx-4 mb-1"}),t(T,{class:"btnLocation"},{default:a(()=>[t(m,{class:"text-none buyBtn",color:"#f68100",variant:"outlined",size:"large",onClick:w=>_.buyCourse(i.id)},{default:a(()=>[c(" خرید دوره ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))])]),o("div",L,[j,e.showCourses==!0?(r(),d("div",O,[(r(!0),d(C,null,f(e.purchasedCourses,(i,u)=>(r(),p($,{class:"mx-auto my-12",style:{border:"1px solid #6d6e71"},"min-width":"374",elevation:"24",key:u},{default:a(()=>[t(v,{cover:"",height:"320",src:g}),t(k,null,{default:a(()=>[t(x,null,{default:a(()=>[c(l(i.name),1)]),_:2},1024)]),_:2},1024),t(b,null,{default:a(()=>[o("div",null,l(i.description),1),o("div",null,l(i.price),1)]),_:2},1024),t(y,{class:"mx-4 mb-1"}),t(T,{class:"btnLocation"},{default:a(()=>[t(m,{class:"text-none buyBtn",color:"#f68100",variant:"outlined",size:"large",onClick:s[0]||(s[0]=w=>_.goToCourse())},{default:a(()=>[c(" ادامه دوره ")]),_:1})]),_:1})]),_:2},1024))),128))])):(r(),d("div",G," دوره متناسب با این کاربر وجود ندارد. "))])])]),_:1})]),_:1})}const Q=B(A,[["render",J],["__scopeId","data-v-821f1bc7"]]);export{Q as default};
